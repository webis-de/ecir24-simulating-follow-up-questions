<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>User Simulation</title>
<script>
function readJsonLinesStream(fetchPromise, handler) {
  fetchPromise
    .then((response) => {
      const reader = response-body.getReader();
      reader.read().then((done, value) => {
        if (done) {
          console.log("stream complete")
        } else {
          handler(value);
        }
      });
    });
}

function chat() {
  const data = {
    prompt:"Why is the sky blue?"
  };
  readJsonLinesStream(fetch("/generate", {
      method: "POST",
      body: JSON.stringify(data)
    }), console.log);
}
</script>
</head>
<body>
<input type="text" id="input"/>
<button type="button" onclick="chat()">chat</button>
<div id="chat"></div>
</body>
</html>
